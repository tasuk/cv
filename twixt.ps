%!PS-Adobe-2.0
%%Creator: tasuki
%%Pages: 1
%%DocumentPaperSizes: a4

% PARAMETERS (you can set these without messing it all up)
% when there is size to set, it is in points
% colours: 0=black, 1=white, inbetween are various shades of gray

/boardsize 24 def % the number of holes in each direction, 24 is standard
/step 21 def % how far away the holes are
/holesize 3 def % radius of the holes
/holecolor 0 def % color of the hole outlines
/holefill 1 def % color of the hole filling
/guidelines .6 def % color of those helping lines (1 makes 'em invisible)
/borderwidth 4 def % width of the black/white border
/bordercolor 0 def % color of the black/white border
/linewidth 1 def % set basic line width (is used everywhere but the borders)

/xoffset 50 def % horizontal offset of the board from lower left
/yoffset 150 def % vertical offset from lower left

% END OF PARAMETERS

% if you mess up with the code below without knowing
% what you are doing, you can get funny results :-)

/bs boardsize 1 sub def
linewidth setlinewidth

/board { % draws the holes
  0 1 bs {
    /h exch def
    0 1 bs {
      /w exch def
      w 0 eq w bs eq or h 0 eq h bs eq or and not {
       holefill setgray w step mul h step mul holesize 0 360 arc closepath fill
       holecolor setgray w step mul h step mul holesize 0 360 arc closepath stroke
      } if
    } for
  } for
} bind def

/glines { % from lower left, all counter-clockwise
  translate
  1 step mul dup moveto
    boardsize 2 div 1 sub step mul bs 2 sub step mul lineto stroke
    % (boardsize/2 - 1) * step,  (bs - 2) * step
  1 step mul dup moveto
    bs 2 sub step mul boardsize 2 div 1 sub step mul lineto stroke
  bs 1 sub step mul 1 step mul moveto
    2 step mul boardsize 2 div 1 sub step mul lineto stroke
  bs 1 sub step mul 1 step mul moveto
    boardsize 2 div step mul bs 2 sub step mul lineto stroke
  bs 1 sub step mul dup moveto
    boardsize 2 div step mul 2 step mul lineto stroke
  bs 1 sub step mul dup moveto
    2 step mul boardsize 2 div step mul lineto stroke
  1 step mul bs 1 sub step mul moveto
    bs 2 sub step mul boardsize 2 div step mul lineto stroke
  1 step mul bs 1 sub step mul moveto
    boardsize 2 div 1 sub step mul 2 step mul lineto stroke
} bind def

guidelines setgray
xoffset yoffset glines

board

2 setlinecap
bordercolor setgray

% from bottom
.5 step mul dup borderwidth 2 div sub .5 linewidth mul add moveto
  bs .5 sub step mul .5 step mul borderwidth 2 div sub .5 linewidth mul add lineto stroke
.5 step mul dup borderwidth 2 div add moveto
  bs .5 sub step mul .5 step mul borderwidth 2 div add lineto stroke
.5 step mul bs .5 sub step mul borderwidth 2 div sub moveto
  bs .5 sub step mul bs .5 sub step mul borderwidth 2 div sub lineto stroke
.5 step mul bs .5 sub step mul borderwidth 2 div add .5 linewidth mul sub moveto
  bs .5 sub step mul dup borderwidth 2 div add .5 linewidth mul sub lineto stroke

borderwidth setlinewidth
.5 step mul dup moveto
  .5 step mul bs .5 sub step mul lineto stroke
bs .5 sub step mul .5 step mul moveto
  bs .5 sub step mul dup lineto stroke

showpage
