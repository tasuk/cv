% tasuki's book macro

% A5 size paper
\pdfpagewidth=148 true mm
\pdfpageheight=210 true mm

% Van de Graaf, can't be bad
\hsize=98 true mm
\vsize=141 true mm

\advance\voffset -1 in
\advance\voffset 23 true mm

\advance\hoffset -1 in
\advance\hoffset 25 true mm

\def\startcontent{
  \output={\ifodd\pageno\advance\hoffset -7mm\else\advance\hoffset 7mm\fi\plainoutput}
  %\output={\ifodd\pageno\advance\hoffset -25mm\else\advance\hoffset 25mm\fi\plainoutput}
  %this is here to be able to check the ``radkovy rejstrik''

  % footline, page number quadded from the edge
  \footline={\ifodd\pageno\hfill\fi\quad\it\folio\quad\hfil}
}

\pdfcatalog{
/PageLayout /TwoColumnRight
/PdfStartView /FitW
}

\pdfprotrudechars=2

\def\torun{
  \font\tenrm=rm-anttr
  \font\tenbf=rm-anttb
  \font\tenit=rm-anttri
  \font\hugecaps=qx-anttrcap scaled \magstep 5
  \font\bigcaps=qx-anttrcap scaled \magstep 2
  \font\caps=qx-anttrcap %scaled \magstep 1
  \font\smallcaps=qx-anttrcap at 8pt
  \font\huge=rm-anttr scaled \magstep 5
  \font\large=rm-anttr scaled \magstep 2
  \font\big=rm-anttr scaled \magstep 1
  \tenrm
  \def\besthang{
    \rpcode\tenrm`\-=300
    \rpcode\tenrm`\.=110
    \rpcode\tenrm`\,=100
    \rpcode\tenrm`\:=60
    \rpcode\tenrm`\;=50
    \rpcode\tenrm'173=150 % n-dash
    \lpcode\tenrm'173=150 % n-dash
    \lpcode\tenrm'134=100 % left double quote
    \rpcode\tenrm'042=100 % right double quote
    \rpcode\tenrm`\'=100
    \lpcode\tenrm`\`=100
    
    \lpcode\tenit`\`=200
    \rpcode\tenit`\-=300
    \rpcode\tenit`\.=110
    \rpcode\tenit`\,=100
    \rpcode\tenit`\:=100
    \rpcode\tenit`\;=100
  }
  \def\completehang{
    \rpcode\tenrm`\-=300
    \rpcode\tenrm`\.=220
    \rpcode\tenrm`\,=200
  }
  \def\partialhang{
    \rpcode\tenrm`\-=150
    \rpcode\tenrm`\.=110
    \rpcode\tenrm`\,=100
  }
  \def\nohang{
    \rpcode\tenrm`\-=0
    \rpcode\tenrm`\.=0
    \rpcode\tenrm`\,=0
  }
}

\def\garamond{
  \font\tenrm=ugmr8a
  \font\tenbf=ugmm8a
  \font\tenit=ugmri8a
  \font\hugecaps=qx-anttrcap scaled \magstep 5
  \font\bigcaps=qx-anttrcap scaled \magstep 2
  \font\caps=qx-anttrcap %scaled \magstep 1
  \font\smallcaps=qx-anttrcap at 8pt
  \font\huge=rm-anttr scaled \magstep 5
  \font\large=rm-anttr scaled \magstep 2
  \font\big=rm-anttr scaled \magstep 1
  \tenrm
}

\def\palatino{
  \font\tenrm=pplr8z at 10pt
  \font\tenbf=pplb8z at 10pt
  \font\tenit=pplri8z at 10pt
  \tenrm
  \def\besthang{
    \rpcode\tenrm`\-=150
    \rpcode\tenrm`\.=90
    \rpcode\tenrm`\,=80
  }
  \def\completehang{
    \rpcode\tenrm`\-=330
    \rpcode\tenrm`\.=250
    \rpcode\tenrm`\,=250
  }
  \def\partialhang{
    \rpcode\tenrm`\-=165
    \rpcode\tenrm`\.=125
    \rpcode\tenrm`\,=125
  }
  \def\nohang{
    \rpcode\tenrm`\-=0
    \rpcode\tenrm`\.=0
    \rpcode\tenrm`\,=0
  }

}

\torun\besthang

\raggedbottom
\nopagenumbers
\tolerance=10000
\clubpenalty=10000 \widowpenalty=10000 % no orphans and widows
\parindent 1em

\def\title#1{\centerline{\hugecaps #1}}
\def\author#1{\centerline{\large #1}}
\def\edition#1{\centerline{\smallcaps #1}}

\def\contents{\leftline{\bigcaps Contents}\bigskip}

\def\tocline#1#2{\line{#1\dotfill#2}}

\def\startline#1#2{\leftline{\hskip #1 cm #2}\nobreak}  % this is for verses (even irregular)

\def\onelineskip{\vskip 12pt \allowbreak} % this is (breaking) verses
\def\oneskip{\vskip 12pt} % this is (breaking) verses

\def\chapter#1#2{
  \vfill\break
  \pdfdest name {#1} fit
  \pdfoutline goto name {#1} {#2}
  \vbox to 178pt{
    \vfil
    \rightline{\hugecaps#1}
    \medskip
    \rightline{\big#2}
    \bigskip
  }
}

\def\chapt#1{
  \vfill\break
  \pdfdest name {#1} fit
  \pdfoutline goto name {#1} {#1}
  \vbox to 178pt{
    \vfil
    \leftline{\hugecaps#1}
  }
}

\def\subchapt#1{
\onelineskip\oneskip
\leftline{\caps #1}
\nobreak\oneskip
}
\def\subchaptt#1#2{
\onelineskip\oneskip
\leftline{\caps #1}
\nobreak
\leftline{\caps #2}
\nobreak\oneskip
}
\def\subchapttt#1#2#3{
\onelineskip\oneskip
\leftline{\caps #1}
\nobreak
\leftline{\caps #2}
\nobreak
\leftline{\caps #3}
\nobreak\oneskip
}

\def\letter{
\it
}

\def\endletter{
\rm
}
